# /etc/haproxy/haproxy.cfg

frontend http_front
    bind *:80
    reqadd X-Forwarded-Proto:\ http
    redirect scheme https code 301 if !{ ssl_fc }

frontend https_front
    bind *:443 ssl crt /etc/haproxy/certs/example.com.pem
    default_backend servers

backend servers
    balance roundrobin
    server server1 192.168.0.1:80 check
    server server2 192.168.0.2:80 check
